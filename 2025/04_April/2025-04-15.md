# 2025-04-15 TIL

## ✨ 오늘 배운 것

- JWT 토큰 인증방식

## 🔍 배운 내용 정리

# 📌 JWT 로그인 개념과 적용법 (with React + Spring Boot 예시)

---

## 1. JWT란?

**JWT (Json Web Token)** 는 서버가 클라이언트를 인증한 뒤, 인증 정보를 JSON 형태로 담아 **암호화한 토큰**이야.  
이 토큰은 클라이언트가 **로컬 스토리지에 저장**하고, 이후 요청마다 **헤더에 실어 보내서 인증**하는 방식이야.

---

## 2. JWT 구조

JWT는 총 3개의 부분으로 구성돼:

| 구분      | 설명                                     |
| --------- | ---------------------------------------- |
| Header    | 토큰 타입 (JWT), 알고리즘 (HS256 등)     |
| Payload   | 사용자 정보 (ex. email, userId, role 등) |
| Signature | 위 내용 + secret key 로 암호화한 서명    |

✔️ 서버는 이 **Signature** 를 통해 위조 여부를 확인할 수 있어!

---

## 3. JWT 로그인 흐름

### 1) 로그인 시

- 사용자가 ID/PW를 서버에 보냄 (`POST /login`)
- 서버는 검증 후 **JWT 토큰을 발급**
- 클라이언트는 이 토큰을 **localStorage or sessionStorage 에 저장**

### 2) 인증이 필요한 요청 시

- 클라이언트는 `Authorization: Bearer <JWT>` 헤더를 달고 서버에 요청
- 서버는 이 토큰을 **검증하고 응답**

---

## 4. React에서 JWT 로그인 적용

### ✅ 로그인 시

```javascript
// 로그인 성공 시 받은 토큰 저장
localStorage.setItem("token", response.data.token);
```

### ✅ 요청 시 토큰 포함하기 (axios 설정)

```javascript
// axios 인스턴스 설정
import axios from "axios";

const api = axios.create({
  baseURL: "http://localhost:8080",
});

api.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export default api;
```

### 6. JWT 토큰 유효성 검사 예시

```js
public boolean validateToken(String token) {
    try {
        Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token);
        return true;
    } catch (Exception e) {
        return false;
    }
}
```

### 7. 주의사항

토큰이 노출되면 보안 위험이 있어 → HTTPS 꼭 사용!

Access Token / Refresh Token 구조로 분리해서 보안을 강화할 수 있음

토큰 만료 시간을 반드시 설정해야 해 (ex. 30분)

### ✅ 실전 팁

항목 저장 위치 장점 단점
localStorage 브라우저 저장소 페이지 새로고침에도 유지됨 XSS 공격에 취약
sessionStorage 브라우저 세션 브라우저 종료 시 자동 삭제 세션 유지 시간 짧음
HttpOnly 쿠키 서버가 관리하는 쿠키 JS 접근 불가 → 보안 ↑ 설정 및 관리가 복잡함

## 🤔 오늘의 회고

## 📍 **Reference**

```

```
